<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>B•A•S•E•D — More</title>

  <link rel="apple-touch-icon" href="icon-180.png" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" href="/favicon.png">

  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />

  <style>
    :root{
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --tabbar-h: 92px;
      --tabbar-bg: rgba(12,12,12,0.96);
      --tabbar-border: rgba(255,255,255,0.10);
    }

    body{
      margin:0;
      background:#000;
      color:#fff;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      display:flex;
      flex-direction:column;
      min-height:100vh;
      align-items:center;
      justify-content:flex-start;
      text-align:center;
      padding:24px 16px;
      box-sizing:border-box;
    }

    .app-icon{ width:90px;height:90px;margin-bottom:12px;border-radius:20px;object-fit:contain; }
    .logo{ width:100%;max-width:225px;height:auto;margin-bottom:16px;object-fit:contain; }

    .clan-tag-link{
      color:#fff;text-decoration:none;opacity:.85;font-size:14px;display:inline-block;margin:8px 0 10px;
    }
    .clan-tag-link:hover{ text-decoration:underline; opacity:1; }

    .topnav{
      width:100%;
      max-width:560px;
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap:10px;
      padding:10px 8px 18px;
      box-sizing:border-box;
    }
    .topnav a{
      text-decoration:none;color:#fff;opacity:0.82;font-size:13px;padding:8px 12px;border-radius:999px;
      border:1px solid rgba(255,255,255,0.10);background: rgba(255,255,255,0.04);white-space:nowrap;
    }
    .topnav a.active{
      opacity:1;font-weight:700;border-color: rgba(255,255,255,0.22);background: rgba(255,255,255,0.08);
    }

    /* More page content (NO blue box) */
    .page{
      width:100%;
      max-width:560px;
      text-align:center;
      padding:12px 0 0;
      box-sizing:border-box;
    }
    .page h1{
      margin: 8px 0 14px;
      font-size:18px;
      letter-spacing:.02em;
    }

    .links{
      width:100%;
      max-width:280px;
      margin: 0 auto;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .link-btn{
      display:block;
      padding:12px;
      font-size:16px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      background-color:#fff;
      color:#000;
      text-decoration:none;
    }

    .install-btn{
      background-color:#ffcc00;
      color:#000;
      border:2px solid #000;
      padding:12px 20px;
      font-weight:700;
      border-radius:12px;
    }

    .page-footer{
      margin-top:auto;
      padding:18px 0 0;
      font-size:14px;
      opacity:.7;
      text-align:center;
    }

    /* PWA bottom tabs */
    body.has-pwa-tabs{
      padding-bottom: calc(var(--tabbar-h) + var(--safe-bottom) + 10px);
    }

    .pwa-tabbar{
      position: fixed; left:0; right:0; bottom:0;
      height: var(--tabbar-h);
      padding-bottom: var(--safe-bottom);
      background: var(--tabbar-bg);
      border-top: 1px solid var(--tabbar-border);
      z-index: 9999;
      display:none;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .pwa-tabbar .tabs{
      height:100%;
      max-width:560px;
      margin:0 auto;
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      align-items:center;
      padding:10px 10px 12px;
      box-sizing:border-box;
      gap:8px;
    }

    .pwa-tabbar a{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      text-decoration:none;
      color:#fff;
      opacity:0.78;
      border-radius:16px;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }

    .tab-inner{
      width:100%;
      height:100%;
      border-radius:16px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:6px;
      padding:10px 6px;
      box-sizing:border-box;
    }

    .pwa-tabbar a .icon{ width:22px;height:22px;display:block;transform: translateY(-3px); }

    .pwa-tabbar a .icon img{
      width:22px;height:22px;display:block;object-fit:contain;
      -webkit-user-drag:none;user-select:none;pointer-events:none;
    }

    .pwa-tabbar a .label{ font-size:11px; line-height:1; opacity:0.95; transform: translateY(-2px); font-weight:500; }
    .pwa-tabbar a.active{ opacity:1; }
  </style>

  <script data-goatcounter="https://based.goatcounter.com/count"
          async src="//gc.zgo.at/count.js"></script>
</head>

<body>
  <img src="icontransparent.png" alt="B•A•S•E•D icon" class="app-icon" />
  <img src="logo.png" alt="B•A•S•E•D logo" class="logo" onerror="this.style.display='none';" />

  <a class="clan-tag-link"
     href="https://link.clashofclans.com/en/?action=OpenClanProfile&tag=2QQYJC08Y"
     target="_blank" rel="noopener noreferrer">#2QQYJC08Y</a>

  <nav class="topnav" id="topNav" aria-label="Top navigation">
    <a href="index.html" data-route="dashboard">Home</a>
    <a href="cwl.html" data-route="cwl">CWL</a>
    <a href="war.html" data-route="war">WAR</a>
    <a href="my-stats.html" data-route="mystats">My Stats</a>
    <a href="more.html" data-route="more">More</a>
  </nav>

  <main class="page">
    <h1>More</h1>

    <div class="links">
      <a class="link-btn" href="https://docs.google.com/spreadsheets/d/e/2PACX-1vQJyBeqDwShAcLD0GMnIvNehs8P9eG3ApO6pltrMHe01bZVJn0k3bIxLobnjBpvqEQNDe_sFcRkZPE8/pubhtml" target="_blank" rel="noopener noreferrer">CWL Leaderboards</a>
      <a class="link-btn" href="https://discord.gg/8P96687dPr" target="_blank" rel="noopener noreferrer">Clan Discord</a>
      <a class="link-btn" href="https://link.clashofclans.com/en/?action=OpenClanProfile&tag=2QQYJC08Y" target="_blank" rel="noopener noreferrer">Visit B•A•S•E•D</a>
      <a class="link-btn" href="https://link.clashofclans.com/en/?action=OpenClanProfile&tag=2G89820YG" target="_blank" rel="noopener noreferrer">Visit B•A•S•E•D 2</a>
      <a class="link-btn" href="https://link.clashofclans.com/en/?action=OpenClanProfile&tag=2JL9VPYRU" target="_blank" rel="noopener noreferrer">Visit B•A•S•E•D 3</a>
      <a class="link-btn" href="https://www.clashofstats.com/clans/based-2QQYJC08Y/summary" target="_blank" rel="noopener noreferrer">Clan Stats</a>
      <a class="link-btn" href="https://store.supercell.com/" target="_blank" rel="noopener noreferrer">SuperCell Store</a>
      <a class="link-btn install-btn" href="https://www.youtube.com/watch?v=gIC30U39zpA" target="_blank" rel="noopener noreferrer">How to install B•A•S•E•D App</a>
    </div>
  </main>

  <div class="page-footer">EST DECEMBER 2023</div>

  <nav class="pwa-tabbar" id="pwaTabbar" aria-label="Bottom navigation">
    <div class="tabs">
      <a href="index.html" data-route="dashboard" data-img-key="home"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><img alt="" /></span>
        <span class="label">Home</span>
      </div></a>

      <a href="cwl.html" data-route="cwl" data-img-key="cwl"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><img alt="" /></span>
        <span class="label">CWL</span>
      </div></a>

      <a href="war.html" data-route="war" data-img-key="war"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><img alt="" /></span>
        <span class="label">War</span>
      </div></a>

      <a href="my-stats.html" data-route="mystats" data-img-key="my-stats"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><img alt="" /></span>
        <span class="label">My Stats</span>
      </div></a>

      <a href="more.html" data-route="more" data-img-key="more"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><img alt="" /></span>
        <span class="label">More</span>
      </div></a>
    </div>
  </nav>

  <script>
    function isPwaInstalled(){
      const standaloneDisplay = window.matchMedia && window.matchMedia("(display-mode: standalone)").matches;
      const iosStandalone = (typeof navigator !== "undefined") && ("standalone" in navigator) && navigator.standalone;
      return !!(standaloneDisplay || iosStandalone);
    }

    function currentRoute(){
      const file = (location.pathname.split("/").pop() || "index.html").toLowerCase();
      if(file === "index.html" || file === "") return "dashboard";
      if(file === "cwl.html") return "cwl";
      if(file === "war.html") return "war";
      if(file === "my-stats.html") return "mystats";
      if(file === "more.html") return "more";
      return "dashboard";
    }

    function setActiveNav(){
      const route = currentRoute();
      document.querySelectorAll("[data-route]").forEach(a => {
        a.classList.toggle("active", (a.getAttribute("data-route") || "") === route);
      });
    }

    function applyPwaImageIconStates(){
      if(!isPwaInstalled()) return;
      const tabbar = document.getElementById("pwaTabbar");
      if(!tabbar) return;

      const ver = Date.now();
      tabbar.querySelectorAll("a[data-img-key]").forEach(a => {
        const key = a.getAttribute("data-img-key");
        const img = a.querySelector(".icon img");
        if(!key || !img) return;

        const isActive = a.classList.contains("active");
        const file = isActive ? `${key}-active.png` : `${key}-inactive.png`;
        img.src = `${file}?v=${ver}`;
        img.loading = "eager";
        img.decoding = "async";
      });
    }

    function setupNavUI(){
      const pwa = isPwaInstalled();
      const topNav = document.getElementById("topNav");
      const tabbar = document.getElementById("pwaTabbar");

      if(pwa){
        if(topNav) topNav.style.display = "none";
        if(tabbar) tabbar.style.display = "block";
        document.body.classList.add("has-pwa-tabs");
      } else {
        if(topNav) topNav.style.display = "flex";
        if(tabbar) tabbar.style.display = "none";
        document.body.classList.remove("has-pwa-tabs");
      }
      setActiveNav();
      applyPwaImageIconStates();
    }

    setupNavUI();

    window.addEventListener("pageshow", () => {
      setActiveNav();
      applyPwaImageIconStates();
    });

    document.addEventListener("visibilitychange", () => {
      if(document.visibilityState === "visible"){
        setActiveNav();
        applyPwaImageIconStates();
      }
    });
  </script>
</body>
</html>
