<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>B•A•S•E•D — My Stats</title>

  <link rel="apple-touch-icon" href="icon-180.png" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" href="/favicon.png">

  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />

  <style>
    :root{
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --tabbar-h: 92px;
      --tabbar-bg: rgba(12,12,12,0.96);
      --tabbar-border: rgba(255,255,255,0.10);
    }

    body{
      margin:0;
      background:#000;
      color:#fff;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      display:flex;
      flex-direction:column;
      min-height:100vh;
      align-items:center;
      justify-content:flex-start;
      text-align:center;
      padding:24px 16px;
      box-sizing:border-box;
    }

    .app-icon{ width:90px;height:90px;margin-bottom:12px;border-radius:20px;object-fit:contain; }
    .logo{ width:100%;max-width:225px;height:auto;margin-bottom:16px;object-fit:contain; }

    .clan-tag-link{
      color:#fff;text-decoration:none;opacity:.85;font-size:14px;display:inline-block;margin:8px 0 10px;
    }
    .clan-tag-link:hover{ text-decoration:underline; opacity:1; }

    .topnav{
      width:100%;
      max-width:560px;
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap:10px;
      padding:10px 8px 18px;
      box-sizing:border-box;
    }
    .topnav a{
      text-decoration:none;color:#fff;opacity:0.82;font-size:13px;padding:8px 12px;border-radius:999px;
      border:1px solid rgba(255,255,255,0.10);background: rgba(255,255,255,0.04);white-space:nowrap;
    }
    .topnav a.active{
      opacity:1;font-weight:700;border-color: rgba(255,255,255,0.22);background: rgba(255,255,255,0.08);
    }

    .page{
      width:100%;
      max-width:560px;
      text-align:center;
      padding:24px 10px;
      box-sizing:border-box;
    }
    .page h1{ margin:0 0 10px; font-size:18px; letter-spacing:.02em; }
    .page p{ margin:0; opacity:.75; font-size:14px; }

    body.has-pwa-tabs{
      padding-bottom: calc(var(--tabbar-h) + var(--safe-bottom) + 10px);
    }

    .pwa-tabbar{
      position: fixed; left:0; right:0; bottom:0;
      height: var(--tabbar-h);
      padding-bottom: var(--safe-bottom);
      background: var(--tabbar-bg);
      border-top: 1px solid var(--tabbar-border);
      z-index: 9999;
      display:none;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .pwa-tabbar .tabs{
      height:100%;
      max-width:560px;
      margin:0 auto;
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      align-items:center;
      padding:10px 10px 12px;
      box-sizing:border-box;
      gap:8px;
    }

    .pwa-tabbar a{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      text-decoration:none;
      color:#fff;
      opacity:0.78;
      border-radius:16px;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }

    .tab-inner{
      width:100%;
      height:100%;
      border-radius:16px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:6px;
      padding:10px 6px;
      box-sizing:border-box;
    }

    .pwa-tabbar a .icon{ width:22px;height:22px;display:block;transform: translateY(-3px); }
    .pwa-tabbar a .icon svg{ width:100%;height:100%;display:block;fill: currentColor; }
    .pwa-tabbar a .label{ font-size:11px; line-height:1; opacity:0.95; transform: translateY(-2px); font-weight:500; }
    .pwa-tabbar a.active{ opacity:1; }
  </style>

  <script data-goatcounter="https://based.goatcounter.com/count"
          async src="//gc.zgo.at/count.js"></script>
</head>

<body>
  <img src="icontransparent.png" alt="B•A•S•E•D icon" class="app-icon" />
  <img src="logo.png" alt="B•A•S•E•D logo" class="logo" onerror="this.style.display='none';" />

  <a class="clan-tag-link"
     href="https://link.clashofclans.com/en/?action=OpenClanProfile&tag=2QQYJC08Y"
     target="_blank" rel="noopener noreferrer">#2QQYJC08Y</a>

  <nav class="topnav" id="topNav" aria-label="Top navigation">
    <a href="index.html" data-route="dashboard">Dashboard</a>
    <a href="cwl.html" data-route="cwl">CWL</a>
    <a href="war.html" data-route="war">WAR</a>
    <a href="my-stats.html" data-route="mystats">My Stats</a>
    <a href="more.html" data-route="more">More</a>
  </nav>

  <main class="page">
    <h1>My Stats</h1>
    <p>Coming Soon!</p>
  </main>

  <nav class="pwa-tabbar" id="pwaTabbar" aria-label="Bottom navigation">
    <div class="tabs">
      <a href="index.html" data-route="dashboard"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 3.2 2.5 11.1c-.3.2-.5.6-.5 1v8.2c0 .9.7 1.7 1.7 1.7h5.2c.6 0 1-.4 1-1v-5.5c0-.6.5-1.1 1.1-1.1h2c.6 0 1.1.5 1.1 1.1V21c0 .6.4 1 1 1h5.2c.9 0 1.7-.7 1.7-1.7v-8.2c0-.4-.2-.8-.5-1L12 3.2z"/></svg></span>
        <span class="label">Dashboard</span>
      </div></a>

      <a href="cwl.html" data-route="cwl"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M18 4h2a1 1 0 0 1 1 1v2a5 5 0 0 1-5 5 6 6 0 0 1-4 3.9V18h3a1 1 0 0 1 0 2H9a1 1 0 0 1 0-2h3v-2.1A6 6 0 0 1 8 12a5 5 0 0 1-5-5V5a1 1 0 0 1 1-1h2V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1zm0 2H6v1a3 3 0 0 0 6 0V4h4v3a3 3 0 0 0 2-3V6zm-12 0H4v1a3 3 0 0 0 2 3V6z"/></svg></span>
        <span class="label">CWL</span>
      </div></a>

      <a href="war.html" data-route="war"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M21 3l-7.2 7.2 1.8 1.8L22.8 4.8 21 3zM3 21l7.2-7.2-1.8-1.8L1.2 19.2 3 21zm8.5-8.5 2-2L12 9l-2 2 1.5 1.5zm-6 1.5 3 3-1.4 1.4-3-3L5.5 14zM19 8l-3-3 1.4-1.4 3 3L19 8z"/></svg></span>
        <span class="label">War</span>
      </div></a>

      <a href="my-stats.html" data-route="mystats"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 12a4.5 4.5 0 1 0-4.5-4.5A4.5 4.5 0 0 0 12 12zm0 2c-4.4 0-8 2.2-8 5v1a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1c0-2.8-3.6-5-8-5z"/></svg></span>
        <span class="label">My Stats</span>
      </div></a>

      <a href="more.html" data-route="more"><div class="tab-inner">
        <span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M6 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/></svg></span>
        <span class="label">More</span>
      </div></a>
    </div>
  </nav>

  <script>
    function isPwaInstalled(){
      const standaloneDisplay = window.matchMedia && window.matchMedia("(display-mode: standalone)").matches;
      const iosStandalone = (typeof navigator !== "undefined") && ("standalone" in navigator) && navigator.standalone;
      return !!(standaloneDisplay || iosStandalone);
    }

    function currentRoute(){
      const file = (location.pathname.split("/").pop() || "index.html").toLowerCase();
      if(file === "index.html" || file === "") return "dashboard";
      if(file === "cwl.html") return "cwl";
      if(file === "war.html") return "war";
      if(file === "my-stats.html") return "mystats";
      if(file === "more.html") return "more";
      return "dashboard";
    }

    function setActiveNav(){
      const route = currentRoute();
      document.querySelectorAll("[data-route]").forEach(a => {
        a.classList.toggle("active", (a.getAttribute("data-route") || "") === route);
      });
    }

    function setupNavUI(){
      const pwa = isPwaInstalled();
      const topNav = document.getElementById("topNav");
      const tabbar = document.getElementById("pwaTabbar");

      if(pwa){
        if(topNav) topNav.style.display = "none";
        if(tabbar) tabbar.style.display = "block";
        document.body.classList.add("has-pwa-tabs");
      } else {
        if(topNav) topNav.style.display = "flex";
        if(tabbar) tabbar.style.display = "none";
        document.body.classList.remove("has-pwa-tabs");
      }
      setActiveNav();
    }

    setupNavUI();
  </script>
</body>
</html>
